<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Data Analysis</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
  <style>
    .graph {
      display: none;
      margin-top: 20px;
      text-align: center;
    }

    .graph img {
      width: 90%;
      max-width: 700px;
      border-radius: 8px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }
  </style>
</head>
<body>

  <nav>
    <a href="{{ url_for('home') }}">üè† Home</a>
    <a href="{{ url_for('predict') }}">üìà Predict Price</a>
    <a href="{{ url_for('analysis') }}">üìä Data Analysis</a>
  </nav>

  <div class="container">
    <h2>Exploratory Data Analysis</h2>

    <label for="graphSelect">Choose a graph to display:</label>
    <select id="graphSelect" onchange="showGraph()">
      <option value="">-- Select a graph --</option>
      <option value="price_city">Price vs City</option>
      <option value="area_price">Area vs Price</option>
      <option value="property_distribution">Property Type Distribution</option>
      <option value="bedroom_price">Bedrooms vs Price</option>
      <option value="price_distribution">Price Distribution</option>
      <option value="correlation">Correlation between numerical data</option>
      <option value="purpose_distribution">Purpose Distribution</option>
    </select>

    <div id="price_city" class="graph">
      <h3>Average Price by City</h3>
      <img src="{{ url_for('static', filename='plots/avg_price_by_city.png') }}" alt="Price vs City">
    </div>

    <div id="purpose_distribution" class="graph">
      <h3>Purpose Distribution</h3>
      <img src="{{ url_for('static', filename='plots/purpose_distribution.png') }}" alt="Price vs City">
    </div>
    
    <div id="price_distribution" class="graph">
      <h3>Price Distribution</h3>
      <img src="{{ url_for('static', filename='plots/price_distribution.png') }}" alt="Price vs City">
    </div>

        <div id="correlation" class="graph">
      <h3>Correlation between numerical data</h3>
      <img src="{{ url_for('static', filename='plots/correlation_heatmap.png') }}" alt="Price vs City">
    </div>


    <div id="area_price" class="graph">
      <h3>Area vs Price Scatter Plot</h3>
      <img src="{{ url_for('static', filename='plots/area_vs_price.png') }}" alt="Area vs Price">
    </div>

    <div id="property_distribution" class="graph">
      <h3>Property Type Distribution</h3>
      <img src="{{ url_for('static', filename='plots/property_type_count.png') }}" alt="Property Type">
    </div>

    <div id="bedroom_price" class="graph">
      <h3>Bedrooms vs Price</h3>
      <img src="{{ url_for('static', filename='plots/avg_price_by_bedrooms.png') }}" alt="Bedrooms vs Price">
    </div>
  </div>

  <script>
    function showGraph() {
      let selected = document.getElementById("graphSelect").value;
      let graphs = document.querySelectorAll(".graph");
      graphs.forEach(g => g.style.display = "none");

      if (selected) {
        document.getElementById(selected).style.display = "block";
      }
    }
  </script>

</body>
</html>
